<h1>Aliases</h1>

<p><i> Aliases are shortcuts to very specific XPath-like
queries. An alias is always linked to a package and optional to a
resource type. The result of an alias is a list of unique resources. </i></p>

<h2>Add new alias</h2>
<form method="post" name="add"><label>Package</label><br />
    <select name="package_id" id="package_id">
        #for $p in $packages
        <option value="$p" onclick="changePackage('$p');">$p</option>
        #end for
    </select><br />
    <label>Resource type (optional)</label><br />
    <select name="resourcetype_id" id="resourcetype_id">
        <option value="">-</option>
    </select><br />
    <label>Alias expression</label><br />
    <input type="text" size="80" name="alias" value="$alias" /><br />
    <label>Xpath expression</label><br />
    <input type="text" size="80" name="xpath" value="$xpath" /><br />
    <br />
    <input type="submit" name="add" value="Add" />
</form>

<br />
<br />

<h2>List of all aliases</h2>
<form method="post" name="list">
<table>
    <tr>
      <th> </th>
      <th>Name</th>
      <th>Package</th>
      <th>Resource Type</th>
      <th>Expr</th>
      <th> </th>
    </tr>
    #for $alias in $aliases
    <tr>
        <td><input type="checkbox" name="alias[]" value="$alias" />
        </td>
        <td>$alias.name</td>
        <td>$alias.package_id</td>
        <td>$alias.resourcetype_id</td>
        <td>$alias.expr</td>
        <td>[<a href="$resturl$alias.package_id">XML</a>] [<a
            href="$resturl$alias?output=xhtml">XHTML</a>]</td>
    </tr>
    #end for
</table>
<br />
<input type="submit" name="delete" value="Delete" /></form>

<script type="text/javascript">
    var resourcetypes = new Array();
    #for $p in $packages
    resourcetypes['$p'] = $resourcetypes[$p];
    #end for

    function changePackage(package_id)
    {
      var selectbox = document.getElementById('resourcetype_id');
      selectbox.options.length = 0;
      var emptylink = new Option('-', '');
      selectbox.options[0] = emptylink;
      for (var i=0;i<resourcetypes[package_id].length;i++)
      {
        var link = resourcetypes[package_id][i];
        var addme = new Option(link, link);
        selectbox.options[i+1] = addme;
      }
    }
    changePackage('$packages[0]');
</script>